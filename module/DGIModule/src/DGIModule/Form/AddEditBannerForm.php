<?php /** * @link      https://github.com/demodyne/demodyne * @copyright Copyright (c) 2015-2016 Demodyne (https://www.demodyne.org) * @license   http://www.gnu.org/licenses/agpl.html GNU Affero General Public License */namespace DGIModule\Form;use Zend\Form\Form;use Zend\InputFilter\InputFilterProviderInterface;use Zend\Stdlib\Hydrator\ClassMethods;use DGIModule\Entity\Banner;class AddEditBannerForm extends Form implements InputFilterProviderInterface {     public function __construct()     {         parent::__construct('banner-form');         $this             ->setObject(new Banner())             ->setAttribute('name', 'banner')             ->setOption( 'use_as_base_fieldset', true)             ->setOption( 'use_input_filter_defaults', false)         ;             $this->setAttribute('enctype', 'multipart/form-data');             $this->setAttribute('method', 'post');             $this->setHydrator(new ClassMethods());             $this->add(array(                 'name' => 'bannerName',                 'attributes' => array(                     'type'  => 'text',                     'required' => 'required',                     'class'=>'form-control text-change',                     'id' => 'bannerName',                     'maxlength' => 100,                     'placeholder' => 'Banner name'                 ),             ));             $this->add([                 'type' => 'Zend\Form\Element\Textarea',                 'name' => 'bannerDescription',                 'attributes' => array(                     'required' => 'required',                     'rows' => 6,                     'class'=>'form-control text-change',                     'id' => 'bannerDescription',                     'placeholder' => 'Enter banner description',                     'maxlength' => 1000,                 ),             ]);             $this->add(array(                 'name' => 'bannerUrl',                 'attributes' => array(                     'type'  => 'text',                     'required' => 'required',                     'class'=>'form-control text-change',                     'id' => 'bannerUrl',                     'maxlength' => 200,                     'placeholder' => 'Banner url'                 ),             ));             $this->add([                 'type' => 'Zend\Form\Element\File',                 'name' => 'bannerImage',                 'attributes' => array(                     'type' => 'file',                     'accept' => 'image/*',                     'id' => 'bannerImage'                 ),             ]);     }     /**      * @return array      */     public function getInputFilterSpecification()     {         return array(             'bannerName' => array(                 'required' => true,                 'filters'  => array(                     array('name' => 'StripTags'),                     array('name' => 'StringTrim'),                 ),                 'validators' => array(                     array(                         'name'    => 'NotEmpty',                         'options' => array(                            'messages' => array(\Zend\Validator\NotEmpty::IS_EMPTY  => _("You must provide a banner name."))                         ),                     ),                     array(                         'name'    => 'StringLength',                         'options' => array(                             'encoding' => 'UTF-8',//                              'min'      => 1,                             'max'      => 100,                             'messages' => array(\Zend\Validator\StringLength::TOO_LONG  => _("The banner name is more than %max% characters long"))                         ),                     ),                 ),             ),             'bannerDescription' => array(                 'required' => true,                 'filters' => array(                     array('name' => 'StripTags'),                 ),                 'validators' => array(                     array(                         'name' => 'StringLength',                         'options' => array(                             'encoding' => 'UTF-8',                             'max' => 1000                         ),                     ),                     array(                         'name'    => 'NotEmpty',                         'options' => array(                             'messages' => array(\Zend\Validator\NotEmpty::IS_EMPTY  => _("You must provide a banner description."))                         ),                     ),                 ),             ),             'bannerUrl' => array(                 'required' => true,                 'filters' => array(                     array('name' => 'StripTags'),                     array('name' => 'StringTrim'),                 ),                 'validators' => array(                     array(                         'name'    => 'NotEmpty',                         'options' => array(                             'messages' => array(\Zend\Validator\NotEmpty::IS_EMPTY  => _("You must provide an URL."))                         ),                     ),                      array(                         'name' => 'Uri',                         'options' => array(                             'allowAbsolute' => true,                             'allowRelative' => false,                             'messages' => array(\Zend\Validator\Uri::NOT_URI  => _("The address does not appear to be a valid URL (should start with 'http(s)://')"))                         ),                     ),                     array(                         'name' => 'StringLength',                         'options' => array(                             'encoding' => 'UTF-8',                             //'min' => 2,                             'max' => 2000,                             'messages' => array(\Zend\Validator\StringLength::TOO_LONG  => _("The URL is more than %max% characters long"))                         ),                     ),                 ),             ),             'bannerImage' => array(                 'required' => true,                 'validators' => array(                     array(                         'name'    => 'NotEmpty',                         'options' => array(                             'messages' => array(\Zend\Validator\NotEmpty::IS_EMPTY  => _("You must provide an image file."))                         ),                     ),                     array(                         'name'    => 'Zend\Validator\File\UploadFile',                         'options' => array(                             'messages' => array(                                 \Zend\Validator\File\UploadFile::NO_FILE  => _("The banner image was not uploaded"),                             )                         ),                     ),                     array(                         'name'    => 'Zend\Validator\File\Size',                         'options' => array(                             'max'      => 500000,                              'messages' => array(                                 \Zend\Validator\File\Size::TOO_BIG  => _("Maximum allowed size for file is '%max%' but '%size%' detected"),                                 \Zend\Validator\File\Size::NOT_FOUND  => _("File is not readable or does not exist"),                             )                         ),                     ),                                      ),             )         );     } }